\documentclass{article}
\usepackage{luacas}

\begin{document}
Hi

\begin{CAS}
    vars('x')
    f = x*(1+2*x^2)^(1/3)
    l = IntegralExpression.trialsubstitutions(f)
\end{CAS}
\[ \lprint{l} \] 
\[ \print{int(f,x)} = \print*{int(f,x)}.\] 

\hrulefill

\begin{CAS}
    vars('x')
    num = Poly({1})
    den = Poly({1,0,0,1})
    g = PolynomialRing.partialfractions(num,den)
    g = g:autosimplify()
    num = Poly({-2,3},x)
    den = Poly({-1,0,0,0,1},x)
    h = PolynomialRing.partialfractions(num,den)
    h = h:autosimplify()
\end{CAS}
%\[ \print{int(h,x)} = \print*{int(h,x)} \] 

\begin{CAS}
    vars('x')
    num = 1
    den = x^4+2*x^2+1
    den = den:autosimplify()
    f = num/den
\end{CAS}
\[ \print{int(f,x)} = \print*{int(f,x)} \] 
\end{document}

\begin{CAS}
    vars('x')
    f = e^x/(e^x*e^x+1)
    l = IntegralExpression.trialsubstitutions(f:autosimplify())
    t = IntegralExpression.substitutionmethod(f,x)
\end{CAS}

\[ \{ \lprint{l} \} \] 
\[ \print{t} \] 

\begin{CAS}
    vars('a','b','c','d')
    x = a^(b*c+b*d)
    x = factor(x)
\end{CAS}
\[ \print{x} = \print*{x} \] 

\begin{CAS}
    vars('x')
    f = cos(x)/(1+sin(x))
    f = f:autosimplify()
    l = IntegralExpression.trialsubstitutions(f)
\end{CAS}
\[ \print{int(f,x)} = \print*{int(f,x)} \] 
\[ \{ \lprint{l} \} \] 

\begin{CAS}
    vars('x')
    f = 1/(1+e^x)
    f = f:autosimplify()
    l = IntegralExpression.trialsubstitutions(f)
    g = f / e^x
    g = g:autosimplify()
\end{CAS}
\[ \print{int(f,x)} = \print*{int(f,x)}\]
\[ \{ \lprint{l} \} \] 
\[ \print{g} \] 

\hrulefill