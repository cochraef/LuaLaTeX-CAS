\documentclass{article}
\usepackage{fullpage}
\usepackage{luacas}
\usepackage{forest}

\begin{document}
Hi 
\begin{CAS}
    vars('x','f')
    f = f(x)
    df = diff(f,x)
\end{CAS}
\[ \print*{f} \qquad \print*{df} \] 
\begin{CAS}
    g = f + df 
    g = g:autosimplify()
    g = substitute({[x]=1},g)
\end{CAS}
\[ \print*{g} \] 
\end{document}



